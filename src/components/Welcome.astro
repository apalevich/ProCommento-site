---
import Logo from "./Logo.astro";
---

<div id="container" class="h-full text-foreground overflow-auto">
    <picture
            class="hidden absolute w-full h-full top-0 left-0 sm:bottom-0 pointer-events-none sm:flex justify-center overflow-hidden">
        <source srcset="/Comet.avif" type="image/avif"/>
        <source srcset="/Comet.webp" type="image/webp"/>
        <source srcset="/Comet.png" type="image/png"/>
        <img src="/Comet.avif" alt="" class="h-[190vh] max-h-[calc(var(--spacing)*720)] -translate-y-1/3 object-cover"/>
    </picture>
    <main class="flex flex-col sm:items-center h-full relative max-sm:px-4 max-h-[calc(var(--spacing)*400)]">
        <header class="py-6 sm:py-11 sm:px-20 flex items-center justify-between w-full">
            <Logo/>
            <div class="hidden sm:block text-foreground-soft text-2xl">Stay tuned on <a href="#"
                                                                                        class="text-primary underline ">LinkedIn</a>
            </div>
        </header>
        <div class="flex flex-col sm:items-center gap-4 max-w-[550px] sm:text-center sm:mt-[10vh]">
            <h1 class="leading-tight text-[2rem] sm:text-5xl font-black">Your LinkedIn <br>comments CRM</h1>
            <p class="text-xl sm:text-2xl">Turn comments into clients. Spark conversations and grow your audience
                without posting
                daily</p>
        </div>
        <div class="flex items-stretch sm:items-center gap-4 sm:gap-0 justify-center mt-4 sm:mt-10 flex-col sm:flex-row sm:py-10 sm:overflow-hidden w-full shrink-0"
             id="cards">
            <div class="text-xl sm:w-[268px] gap-3 flex flex-col bg-card text-foreground-inverted rounded-card p-6 sm:rotate-[11.17deg] card-shadow shrink-0">
                <div class="text-3xl">ü§°</div>
                <div>
                    <p class="font-bold">No more ‚Äúwell done!‚Äù and ‚Äúgood job!‚Äù</p>
                    <p class="text-foreground-soft-inverted text-xl">You know it never worked anyway</p>
                </div>
            </div>
            <div class="text-xl sm:w-[268px] gap-3 flex flex-col bg-card text-foreground-inverted rounded-card p-6 sm:rotate-[-12.56deg] card-shadow shrink-0">
                <div class="text-3xl">üòé</div>
                <div>
                    <p class="font-bold">Comment like a Pro</p>
                    <p class="text-foreground-soft-inverted text-xl">With AI generator tailored to your profile</p>
                </div>


            </div>
            <div class="text-xl sm:w-[268px] gap-3 flex flex-col bg-card text-foreground-inverted rounded-card p-6 sm:rotate-[9.49deg] card-shadow shrink-0">
                <div class="text-3xl">üìä</div>
                <div>
                    <p class="font-bold">Keep track of things</p>
                    <p class="text-foreground-soft-inverted text-xl">
                        Likes, replies, views ‚Äì you name it
                    </p>
                </div>
            </div>
            <div class="text-xl sm:w-[268px] gap-3 flex flex-col rounded-card p-6 sm:rotate-[-12.49deg] relative shrink-0"
                 id="last-card">
                <div class="flex items-center justify-between text-3xl">üöÄ<span
                        class="text-foreground-soft text-xl">soon</span></div>
                <div>
                    <p class="font-bold">Scale growth</p>
                    <p class="text-foreground-soft text-xl">With autoposting agent that never sleeps</p>
                </div>
                <svg
                        viewBox="0 0 300 233"
                        class="absolute left-0 top-0 w-full h-full"
                        preserveAspectRatio="none"
                >
                    <rect
                            x="1"
                            y="1"
                            width="298"
                            height="231"
                            rx="20"
                            ry="20"
                            class="fill-none stroke-foreground-soft"
                            stroke-width="1"
                            stroke-dasharray="8 8"
                            vector-effect='non-scaling-stroke'
                    />
                </svg>
            </div>
        </div>
        <div class="sticky w-[calc(100%+var(--spacing)*8)] max-sm:mt-32 max-sm:-mx-4 sm:w-full bottom-10 sm:block sm:absolute sm:bottom-10">
            <picture
                    id="swap-image-1"
                    class="block sm:hidden absolute -top-[500px] left-0 w-full h-[790px] pointer-events-none z-0 overflow-hidden">
                <source srcset="/CometMobile.avif" type="image/avif"/>
                <source srcset="/CometMobile.webp" type="image/webp"/>
                <source srcset="/CometMobile.png" type="image/png"/>
                <img src="/CometMobile.avif" alt=""
                     class="absolute left-1/2 bottom-0 min-w-[800px] w-[170vw] aspect-auto max-w-[900px] -translate-x-1/2 translate-y-[14%]"/>
            </picture>
            <picture
                    id="swap-image-2"
                    class="block sm:hidden absolute -top-[500px] left-0 w-full h-[790px] pointer-events-none z-0 overflow-hidden">
                <source srcset="/Comet.avif" type="image/avif"/>
                <source srcset="/Comet.webp" type="image/webp"/>
                <source srcset="/Comet.png" type="image/png"/>
                <img src="/Comet.avif" alt="" class="absolute left-1/2 bottom-0 max-w-none w-[500px] -translate-x-1/2"/>
            </picture>
            <div class="flex flex-col items-center gap-4 max-w-[230px] text-center mx-auto relative">
                <div class="bg-[#5362F6] absolute -inset-8 -z-1 blur-lg rounded-full"></div>
                <div class="text-2xl font-extrabold relative">Try now</div>
                <div class="text-xl relative">2 day trial, no credit card required</div>
            </div>
        </div>
        <div class="sm:hidden text-foreground-soft text-2xl pb-10 pt-32 relative text-center">Stay tuned on <a href="#"
                                                                                                               class="text-primary underline ">LinkedIn</a>
        </div>
    </main>
</div>

<style>
    .card-shadow {
        box-shadow: 0px 6.39px 10.02px 0px hsla(0, 0%, 0%, 0.04), 0px 15.38px 24.12px 0px hsla(0, 0%, 0%, 0.05);
    }

    #swap-image-1 {
        transition: opacity 0.2s cubic-bezier(.95, .21, .83, .67);
    }

    #swap-image-2 {
        transition: opacity 0.3s cubic-bezier(.19, .97, .7, .87);
    }

    #swap-image-2 {
        opacity: 0;
    }

    .is-not-visible {
        opacity: 0 !important;
    }

    .is-visible {
        opacity: 1 !important;
    }

    .on-top {
        z-index: 10;
    }
</style>

<script>
    const cards = document.querySelector('#cards');
    const card = document.querySelector('#last-card');
    const image1 = document.querySelector('#swap-image-1');
    const image2 = document.querySelector('#swap-image-2');

    const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                console.debug('intersecting');
                image1?.classList.add('is-not-visible');
                image2?.classList.add('is-visible');
                cards?.classList.add('on-top');
            } else {
                image1?.classList.remove('is-not-visible');
                image2?.classList.remove('is-visible');
                cards?.classList.remove('on-top');
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50% 0px'
    });

    if (card) {
        cardObserver.observe(card);
    }
</script>

